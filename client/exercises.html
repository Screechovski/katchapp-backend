<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Упражнения</title>
  <script src="validation.js"></script>
  <script src="main.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

  <script>
    const loadExercises = async () => {
      const exercises = await (await fetch('/api/exercises')).json()

      console.log(exercises);

      return exercises;
    }

    const createExerciseCard = ({ ID, name, imageName }) => {
      return `
        <tr>
          <th scope="row">${ID}</th>
          <td>${name}</td>
          <td>
            <img
              height="80"
              width="80"
              src="/image/exercise/${imageName}"
              />
          </td>
        </tr>
        `
    }

    const prepareExerciseCard = async (renderElement) => {
      try {
        const exercises = await loadExercises();
        exercises.forEach(exercise => {
          renderElement?.insertAdjacentHTML('beforeend', createExerciseCard(exercise))
        });
      } catch (error) {
        console.warn(error);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      prepareExerciseCard(document.getElementById('main'));
    })
  </script>
</head>

<body>
  <main>
    <div class="container">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">название</th>
            <th scope="col">картинка</th>
          </tr>
        </thead>
        <tbody id="main">

        </tbody>
      </table>
    </div>
  </main>
</body>

</html>